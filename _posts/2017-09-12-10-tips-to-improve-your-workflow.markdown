---
layout: post
title: Android app 微信支付爬坑
date: 2018-12-09 19:00:00 +0300
description: 具体所记录是从懵逼状态到支付成功
img: software.jpg
tags: [Android app, 微信支付，爬坑] # add tag
---

> 本来开开心心的上班，安安静静的撸代码，偶尔幻想一下美好的人生多好，让我做微信支付，说没有支付的购物流程是没有灵魂的。。。当然，这是实话|||--

## 前序
先说说在做这个功能前我的状态（对微信支付的认知），四个字：一脸懵逼。
完全不知道思路，不知道专用名词的意思，不知道调试，不知道该有的步骤和思路是什么，有的只是百度（后面有了翻墙的本领，也用了谷歌）。
所以先总结一下需要用到的东西和思路。
## 准备
所搭建的app是基于ionic 和 cordova框架下的。app开发的时候可以在本地网页上f12调试就可以了。但要调试apk，可不会那么方便。我选择的是谷歌：***chrome://inspect/#devices***来进行调试。
调试需要：
- 安卓手机一部
- 能传数据的安卓数据线一根
- 翻墙
- debug.apk（调试问题的时候需要使用未签名的debug.apk，最后要调用支付的时候需要正式签名的apk）
微信支付需求：
- AppID
- 应用签名
- 开发的包名
- 商户id
- key
这里需要详细讲一下这四个东西是咋搞来的，还有他们之间的关系是啥，有啥用。需要访问微信开放平台：https://open.weixin.qq.com


#### AppID
访问微信开放平台，申请app应用，申请的时候，里面所需要填的几个关键的东西是：包名，签名。包名就是我们打包的时候，项目根目录下的config.xml文件中的顶部，那里所需要填的包名，要写一致。关于这个签名，我们可以访问
#### 应用签名

#### 开发的包名

#### 商户id

#### key

具体关键术语和支付流程已经思路，在官方文档这里有写：https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=23_1。